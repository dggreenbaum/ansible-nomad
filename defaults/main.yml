---
# File: defaults/main.yml - Main default variables for nomad

nomad_version: "0.4.1"
nomad_server_count: "2"
nomad_zip_url: "https://releases.hashicorp.com/nomad/{{ nomad_version }}/nomad_{{ nomad_version }}_linux_amd64.zip"
nomad_zip_sha256: "0cdb5dd95c918c6237dddeafe2e9d2049558fea79ed43eacdfcd247d5b093d67"
nomad_group_name: "cluster_nodes"
nomad_bin_dir: "/usr/local/bin"
nomad_config_dir: "/etc/nomad.d"
nomad_data_dir: "/var/nomad"
nomad_log_dir: "/var/log/nomad"
nomad_user: "root"
nomad_group: "bin"
nomad_region: "global"
nomad_datacenter: "dc1"
nomad_node_class: ""
nomad_log_level: "INFO"
nomad_syslog_enable: "true"
nomad_iface: "eth1"
nomad_advertise_address: "{{ hostvars[inventory_hostname]['ansible_'+nomad_iface]['ipv4']['address'] }}"
nomad_bind_address: "0.0.0.0"
nomad_docker_enable: "{{ lookup('env','NOMAD_DOCKER_ENABLE') | default('false', true) }}"
nomad_apt_key_url: "hkp://p80.pool.sks-keyservers.net:80"
nomad_apt_key_sig: 58118E89F3A912897C070ADBF76221572C52609D
nomad_apt_repo: deb https://apt.dockerproject.org/repo {{ ansible_lsb.id|lower }}-{{ ansible_lsb.codename|lower }} main

## Package vars

nomad_centos_pkg: "nomad_{{ nomad_version }}_linux_amd64.zip"
nomad_centos_url: "{{ nomad_zip_url }}"
nomad_centos_sha256: "{{ nomad_zip_sha256 }}"

nomad_centos_os_packages:
  - curl
  - git
  - libselinux-python
  - unzip

nomad_debian_pkg: "nomad_{{ nomad_version }}_linux_amd64.zip"
nomad_debian_url: "{{ nomad_zip_url }}"
nomad_debian_sha256: "{{ nomad_zip_sha256 }}"
nomad_docker_debian_repo: "deb https://apt.dockerproject.org/repo debian-jessie main"
nomad_debian_os_packages:
  - cgroup-bin
  - curl
  - git
  - libcgroup1
  - unzip

nomad_redhat_pkg: "nomad_{{ nomad_version }}_linux_amd64.zip"
nomad_redhat_url: "{{ nomad_zip_url }}"
nomad_redhat_sha256: "{{ nomad_zip_sha256 }}"

nomad_redhat_os_packages:
  - curl
  - git
  - libselinux-python
  - unzip

nomad_ubuntu_pkg: "nomad_{{ nomad_version }}_linux_amd64.zip"
nomad_ubuntu_url: "{{ nomad_zip_url }}"
nomad_ubuntu_sha256: "{{ nomad_zip_sha256 }}"
nomad_docker_ubuntu_repo: "deb https://apt.dockerproject.org/repo ubuntu-xenial main"
nomad_ubuntu_os_packages:
  - cgroup-bin
  - curl
  - git
  - libcgroup1
  - unzip
